"use strict";function sendAjax(e){if(e.dataType||(e.dataType="json"),"json"!=e.dataType&&"string"!=e.dataType)throw new Error("想要的数据类型参数不正确，只接受json或string");if(!e.url)throw new Error("请求的url不能为空");if("[object String]"!=Object.prototype.toString.call(e.url))throw new Error("请求的url不是一个正确的url");if(e.type||(e.type="get"),"get"!=e.type&&"post"!=e.type)throw new Error("请求方式的参数必须是get或post");if(e.data)if("[object String]"==Object.prototype.toString.call(e.data)&&-1!=e.data.indexOf("="))e.data=e.data;else{if("[object Object]"!=Object.prototype.toString.call(e.data))throw new Error("传入的数据类型不正确，只接受字符串或对象");var t="",r="";for(var a in e.data)t+=r+a+"="+e.data[a],r="&";e.data=t}if("get"==e.type&&(e.url+="?"+e.data),null==e.async&&(e.async=!0),"[object Boolean]"!=Object.prototype.toString.call(e.async))throw new Error("是否异步的参数必须是一个布尔值");var o;e.success||(e.success=function(){}),e.error||(e.error=function(){});try{o=new XMLHttpRequest}catch(t){o=new ActiveXObject("Microsoft.XMLHTTP")}o.open(e.type,e.url,e.async),o.onreadystatechange=function(){var t;4===o.readyState&&(200<=o.status&&o.status<300?(t=o.responseText,"json"===e.dataType&&(t=JSON.parse(t)),e.success(t)):e.error())},"post"===e.type&&(o.setRequestHeader("content-type","application/x-www-form-urlencoded"),e.data)?o.send(e.data):o.send()}function pAjax(s){return new Promise(function(e,r){if(s.dataType||(s.dataType="json"),"json"!=s.dataType&&"string"!=s.dataType)throw new Error("想要的数据类型参数不正确，只接受json或string");if(!s.url)throw new Error("请求的url不能为空");if("[object String]"!=Object.prototype.toString.call(s.url))throw new Error("请求的url不是一个正确的url");if(s.type||(s.type="get"),"get"!=s.type&&"post"!=s.type)throw new Error("请求方式的参数必须是get或post");if(s.data)if("[object String]"==Object.prototype.toString.call(s.data)&&-1!=s.data.indexOf("="))s.data=s.data;else{if("[object Object]"!=Object.prototype.toString.call(s.data))throw new Error("传入的数据类型不正确，只接受字符串或对象");var t="",a="";for(var o in s.data)t+=a+o+"="+s.data[o],a="&";s.data=t}if("get"==s.type&&(s.url+="?"+s.data),null==s.async&&(s.async=!0),"[object Boolean]"!=Object.prototype.toString.call(s.async))throw new Error("是否异步的参数必须是一个布尔值");var n;try{n=new XMLHttpRequest}catch(t){n=new ActiveXObject("Microsoft.XMLHTTP")}n.open(s.type,s.url,s.async),n.onreadystatechange=function(){var t;4===n.readyState&&(200<=n.status&&n.status<300?(t=n.responseText,"json"===s.dataType&&(t=JSON.parse(t)),e(t)):r())},"post"===s.type&&(n.setRequestHeader("content-type","application/x-www-form-urlencoded"),s.data)?n.send(s.data):n.send()})}